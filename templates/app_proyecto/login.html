{% extends 'app_proyecto/base.html' %}
{% load static %}

{% block condiciones %}
    <script>
      // window.location.replace("../salir");
    </script>
    <!-- <p>Puesto: {{request.session.id_puesto}}</p> -->
     {%if request.session.id_puesto  == "Gerente"%}
		<script>window.location.replace("../inicio_gerente");</script>
	{%elif request.session.id_puesto  == "Supervisor"%}
		<script>alert("Es Supervisor")</script>
	{%elif request.session.id_puesto  == "Empleado"%}
		<script>alert("Es Empleado")</script>
	{%endif%}
{% endblock %} 


{% block titulo %}Iniciar sesión{% endblock %} 

{% block titulo_navbar %}Iniciar sesión{% endblock %}

{% block contenido %}
	<div class="container" style="width: 50%;">
		 <div class="row">
		    <form method="POST" class="col s12">
	    	{% csrf_token %}
		      <div class="row">
			        <div class="input-field col s12">
			          <i class="fas fa-user-circle prefix"></i>
			          <input id="icon_prefix" type="text" class="validate" name="f_curp" required="true" autocomplete="off">
			          <label for="icon_prefix">Usuario</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="fas fa-key prefix"></i>
			          <input id="icon_telephone" type="password" class="validate" name = "f_contraseña" required="true" autocomplete="off">
			          <label for="icon_telephone">Contraseña</label>
			        </div>
		      	</div>
				<div class="right">
					<button class="btn waves-effect teal darken-4" type="submit">Iniciar
				  	<i class="fas fa-sign-in-alt left"></i>
				  </button>
				</div>
		    </form>
		</div>
	</div>
<script>
	var supervisor_id="";
	var password_supervisor="";
		
	$(document).ready(function(){
		$.ajax({
			type: "GET",
			contentType: "json",
			dateType: "json",
			url:"/json_supervisor/",
			success:function(response){
				for (var i = 0; i < response.length; i++) {
					supervisor_id = response[i].pk
					password_supervisor = response[i].fields.contraseña
				}

				var txt_supervisor=prompt('Usuario:');
				if (txt_supervisor==supervisor_id){
				   
				   txt_password=prompt('Ingresa la contraseña:');
				    if (txt_password==password_supervisor){
				        
				     }
				    else {
						alert("Error, datos incorrectos."); 
						location.reload();        
			 	   }
				}
				else {
					alert("Error, datos incorrectos.");
					location.reload(); 
				}
			}
		});
	});
</script>
{% endblock %}